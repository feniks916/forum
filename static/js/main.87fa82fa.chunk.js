(this.webpackJsonptimer=this.webpackJsonptimer||[]).push([[0],{124:function(e,a,t){e.exports={wrapper:"main_wrapper__36HIk"}},127:function(e,a,t){e.exports=t(201)},148:function(e,a,t){},149:function(e,a,t){e.exports={body:"App_body__3Aexq",ul:"App_ul__zXSjm",ticketsArea:"App_ticketsArea__lzTW3",wrapper:"App_wrapper__2HLsp",img:"App_img__3MMz6"}},201:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(23),l=t.n(o),s=t(55),i=t(80),u=t(65),c=t.n(u),m=u.create({baseURL:"https://conduit.productionready.io"}),p={username:"",token:"",value:null,status:null,error:null},d=function(e){return{type:"SET_TOKEN",data:e}},f=function(e){return{type:"SET_ERROR",data:e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_TOKEN":return Object(i.a)({},e,{token:a.data.data.user.token,username:a.data.data.user.username,status:a.data.request.status});case"SET_VALUE":return Object(i.a)({},e,{status:a.data.data});case"SET_ERROR":return Object(i.a)({},e,{error:a.data});default:return e}},b=t(110),w=Object(s.c)({mainPage:h}),E=Object(s.d)(w,Object(s.a)(b.a));window.store=E;var g=E,_=(t(148),t(149),t(24)),v=t.n(_),y=t(42),k=t(31),S=t(21),j=t(74),O=t(202),C=t(4),x=t(79),P=t(40),N=t.n(P),R=Object(k.b)((function(e){return{error:e.mainPage.error,status:e.mainPage.status}}),{RegistrationThunkCreator:function(e){return function(a){(function(e){return m.post("/api/users",e).then((function(e){return e}))})({user:{email:e.email,password:e.password,username:e.name}}).then((function(e){a(d(e))})).catch((function(e){a(f(e.response.data.errors))}))}}})((function(e){var a=e.status,t=e.error,n=e.RegistrationThunkCreator;return console.log(t),200===a?r.a.createElement(C.a,{to:"/forum"}):r.a.createElement("div",{className:N.a.wrapper},r.a.createElement(S.b,{to:"/forum/LoginPage"}," Login page"),r.a.createElement(j.a,{initialValues:{email:"",name:"",password:"",confirm_password:""},onSubmit:function(){var e=Object(y.a)(v.a.mark((function e(a,t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.setSubmitting,e.next=3,new Promise((function(e){return setTimeout(e,1e3)}));case 3:r(!1),n({email:a.email,password:a.password,name:a.name});case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),validationSchema:x.a().shape({confirm_password:x.c().oneOf([x.b("password"),null],"Passwords dont match")})},(function(e){var a=e.values,n=e.touched,o=e.errors,l=e.dirty,s=e.isSubmitting,i=e.handleChange,u=e.handleBlur,c=e.handleSubmit,m=e.handleReset;return r.a.createElement("form",{onSubmit:c,className:N.a.form},r.a.createElement("label",{htmlFor:"email",style:{display:"block"}},"Email"),r.a.createElement(O.a,{id:"email",placeholder:"Enter your email",type:"text",value:a.email,onChange:i,onBlur:u,className:N.a.input}),null!==t&&void 0!==t.email&&r.a.createElement("div",null,"Email ".concat(String(t.email))),r.a.createElement("label",{htmlFor:"email",style:{display:"block"}},"Name"),r.a.createElement(O.a,{id:"name",placeholder:"Enter your name",type:"text",value:a.email2,onChange:i,onBlur:u,className:N.a.input}),null!==t&&void 0!==t.username&&r.a.createElement("div",null,"Name ".concat(String(t.username))),r.a.createElement("label",{htmlFor:"email",style:{display:"block"}},"Password"),r.a.createElement(O.a,{id:"password",placeholder:"Enter your name",type:"password",value:a.email2,onChange:i,onBlur:u,className:N.a.input}),null!==t&&void 0!==t.password&&r.a.createElement("div",null,"Password ".concat(String(t.password))),r.a.createElement("label",{htmlFor:"email",style:{display:"block"}},"Repeat Password"),r.a.createElement(O.a,{id:"confirm_password",placeholder:"Enter your name",type:"password",value:a.email2,onChange:i,onBlur:u,className:N.a.input}),o.confirm_password&&n.confirm_password&&r.a.createElement("div",null,o.confirm_password),r.a.createElement("button",{type:"button",className:"outline",onClick:m,disabled:!l||s},"Reset"),r.a.createElement("button",{type:"submit",disabled:s},"Submit"))})))})),A=t(62),T=t.n(A),B=Object(k.b)((function(e){return{error:e.mainPage.error,status:e.mainPage.status}}),{thunkCreator:function(e){return function(a){(function(e){return m.post("/api/users/login",e).then((function(e){return e}))})({user:{email:e.email,password:e.password}}).then((function(e){a(d(e)),localStorage.setItem("cool-jwt",e.data.user.token),localStorage.setItem("cool-name",e.data.user.username)})).catch((function(e){a(f(e.response.data.errors))}))}}})((function(e){var a=e.status,t=e.error,n=e.thunkCreator;return 200===a?r.a.createElement(C.a,{to:"/forum"}):r.a.createElement("div",{className:T.a.wrapper},r.a.createElement(S.b,{to:"/forum/Registration"}," Registration page"),r.a.createElement(j.a,{initialValues:{email:"",password:""},onSubmit:function(){var e=Object(y.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,500)}));case 2:n({email:a.email,password:a.password});case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},(function(e){var a=e.values,n=e.dirty,o=e.isSubmitting,l=e.handleChange,s=e.handleBlur,i=e.handleSubmit,u=e.handleReset;return r.a.createElement("form",{onSubmit:i,className:T.a.form},r.a.createElement("label",{htmlFor:"email",style:{display:"block"}},"Email"),r.a.createElement(O.a,{id:"email",placeholder:"Enter your email",type:"text",value:a.email,onChange:l,onBlur:s,className:T.a.input}),r.a.createElement("label",{htmlFor:"email",style:{display:"block"}},"password"),r.a.createElement(O.a,{id:"password",placeholder:"Enter your name",type:"password",value:a.password,onChange:l,onBlur:s,className:T.a.input}),null!==t&&r.a.createElement("div",null,"email or password ".concat(t["email or password"])),r.a.createElement("button",{type:"button",className:"outline",onClick:u,disabled:!n||o},"Reset"),r.a.createElement("button",{type:"submit",disabled:o},"Submit"))})))})),L=t(125),F=t(124),I=t.n(F),V=Object(k.b)((function(e){return{username:e.mainPage.username,token:e.mainPage.token,status:e.mainPage.status}}),{setValueAC:function(e){return{type:"SET_VALUE",data:e}}})((function(e){var a=Object(n.useState)(null),t=Object(L.a)(a,2),o=t[0],l=t[1];Object(n.useEffect)((function(){var a=localStorage.getItem("cool-jwt");null===o&&function(){var t=Object(y.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===a){t.next=11;break}return t.prev=1,t.next=4,c.a.get("https://conduit.productionready.io/api/user",{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token ".concat(a)}});case 4:t.sent,l(localStorage.getItem("cool-name")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),t.t0&&(localStorage.removeItem("cool-jwt"),e.setValueAC({data:401}),e.history.push("/forum/LoginPage"));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}()()}),[o,e]);return r.a.createElement("div",{className:I.a.wrapper},r.a.createElement("h3",null," ",o," "),r.a.createElement("button",{onClick:function(){return e.history.push("/forum/LoginPage"),e.setValueAC({data:401})}}," \u0412\u044b\u0439\u0442\u0438 "))})),z=function(){return r.a.createElement(S.a,null,r.a.createElement(C.b,{path:"/forum/LoginPage",component:B}),r.a.createElement(C.b,{path:"/forum/Registration",component:R}),r.a.createElement(C.b,{exact:!0,path:"/forum/",component:V}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(S.a,null,r.a.createElement(k.a,{store:g},r.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},40:function(e,a,t){e.exports={wrapper:"registration_wrapper__3w-sm",form:"registration_form__1d1UH",input:"registration_input__3F6qd"}},62:function(e,a,t){e.exports={wrapper:"login_wrapper__1DHUi",form:"login_form__2l9yv",input:"login_input__2o3z6"}}},[[127,1,2]]]);
//# sourceMappingURL=main.87fa82fa.chunk.js.map
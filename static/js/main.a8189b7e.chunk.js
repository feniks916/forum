(this.webpackJsonptimer=this.webpackJsonptimer||[]).push([[0],{124:function(e,a,t){e.exports={wrapper:"main_wrapper__36HIk"}},126:function(e,a,t){e.exports=t(200)},147:function(e,a,t){},148:function(e,a,t){e.exports={body:"App_body__3Aexq",ul:"App_ul__zXSjm",ticketsArea:"App_ticketsArea__lzTW3",wrapper:"App_wrapper__2HLsp",img:"App_img__3MMz6"}},200:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(23),l=t.n(o),s=t(53),i=t(79),u=t(109).create({baseURL:"https://conduit.productionready.io"}),c={username:"",token:"",value:null,status:null,error:null},m=function(e){return{type:"SET_TOKEN",data:e}},p=function(e){return{type:"SET_ERROR",data:e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_TOKEN":return Object(i.a)({},e,{token:a.data.data.user.token,username:a.data.data.user.username,status:a.data.request.status});case"SET_VALUE":return Object(i.a)({},e,{value:a.data});case"SET_ERROR":return Object(i.a)({},e,{error:a.data});default:return e}},f=t(110),h=Object(s.c)({mainPage:d}),E=Object(s.d)(h,Object(s.a)(f.a));window.store=E;var b=E,w=(t(147),t(148),t(30)),g=t(54),_=t.n(g),v=t(64),y=t(20),k=t(73),S=t(201),C=t(4),N=t(78),R=t(39),O=t.n(R),P=function(e){var a=e.status,t=e.error,n=e.RegistrationThunkCreator;return console.log(t),200===a?r.a.createElement(C.a,{to:"/forum"}):r.a.createElement("div",{className:O.a.wrapper},r.a.createElement(y.b,{to:"/forum/LoginPage"}," Login page"),r.a.createElement(k.a,{initialValues:{email:"",name:"",password:"",confirm_password:""},onSubmit:function(){var e=Object(v.a)(_.a.mark((function e(a,t){var r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.setSubmitting,e.next=3,new Promise((function(e){return setTimeout(e,1e3)}));case 3:r(!1),n({email:a.email,password:a.password,name:a.name});case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),validationSchema:N.a().shape({confirm_password:N.c().oneOf([N.b("password"),null],"Passwords dont match")})},(function(e){var a=e.values,n=e.touched,o=e.errors,l=e.dirty,s=e.isSubmitting,i=e.handleChange,u=e.handleBlur,c=e.handleSubmit,m=e.handleReset;return r.a.createElement("form",{onSubmit:c,className:O.a.form},r.a.createElement("label",{htmlFor:"email",style:{display:"block"}},"Email"),r.a.createElement(S.a,{id:"email",placeholder:"Enter your email",type:"text",value:a.email,onChange:i,onBlur:u,className:O.a.input}),null!==t&&void 0!==t.email&&r.a.createElement("div",null,"Email ".concat(String(t.email))),r.a.createElement("label",{htmlFor:"email",style:{display:"block"}},"Name"),r.a.createElement(S.a,{id:"name",placeholder:"Enter your name",type:"text",value:a.email2,onChange:i,onBlur:u,className:O.a.input}),null!==t&&void 0!==t.username&&r.a.createElement("div",null,"Name ".concat(String(t.username))),r.a.createElement("label",{htmlFor:"email",style:{display:"block"}},"Password"),r.a.createElement(S.a,{id:"password",placeholder:"Enter your name",type:"password",value:a.email2,onChange:i,onBlur:u,className:O.a.input}),null!==t&&void 0!==t.password&&r.a.createElement("div",null,"Password ".concat(String(t.password))),r.a.createElement("label",{htmlFor:"email",style:{display:"block"}},"Repeat Password"),r.a.createElement(S.a,{id:"confirm_password",placeholder:"Enter your name",type:"password",value:a.email2,onChange:i,onBlur:u,className:O.a.input}),o.confirm_password&&n.confirm_password&&r.a.createElement("div",null,o.confirm_password),r.a.createElement("button",{type:"button",className:"outline",onClick:m,disabled:!l||s},"Reset"),r.a.createElement("button",{type:"submit",disabled:s},"Submit"))})))},T=Object(w.b)((function(e){return{error:e.mainPage.error,status:e.mainPage.status}}),{RegistrationThunkCreator:function(e){return function(a){(function(e){return u.post("/api/users",e).then((function(e){return e}))})({user:{email:e.email,password:e.password,username:e.name}}).then((function(e){a(m(e))})).catch((function(e){a(p(e.response.data.errors))}))}}})(P),x=t(61),j=t.n(x),A=function(e){var a=e.status,t=e.error,n=e.thunkCreator;return 200===a?r.a.createElement(C.a,{to:"/forum"}):r.a.createElement("div",{className:j.a.wrapper},r.a.createElement(y.b,{to:"/forum/Registration"}," Registration page"),r.a.createElement(k.a,{initialValues:{email:"",password:""},onSubmit:function(){var e=Object(v.a)(_.a.mark((function e(a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,500)}));case 2:n({email:a.email,password:a.password});case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},(function(e){var a=e.values,n=e.dirty,o=e.isSubmitting,l=e.handleChange,s=e.handleBlur,i=e.handleSubmit,u=e.handleReset;return r.a.createElement("form",{onSubmit:i,className:j.a.form},r.a.createElement("label",{htmlFor:"email",style:{display:"block"}},"Email"),r.a.createElement(S.a,{id:"email",placeholder:"Enter your email",type:"text",value:a.email,onChange:l,onBlur:s,className:j.a.input}),r.a.createElement("label",{htmlFor:"email",style:{display:"block"}},"password"),r.a.createElement(S.a,{id:"password",placeholder:"Enter your name",type:"password",value:a.password,onChange:l,onBlur:s,className:j.a.input}),null!==t&&r.a.createElement("div",null,"email or password ".concat(t["email or password"])),r.a.createElement("button",{type:"button",className:"outline",onClick:u,disabled:!n||o},"Reset"),r.a.createElement("button",{type:"submit",disabled:o},"Submit"))})))},B=Object(w.b)((function(e){return{error:e.mainPage.error,status:e.mainPage.status}}),{setTokenAC:m,thunkCreator:function(e){return function(a){(function(e){return u.post("/api/users/login",e).then((function(e){return e}))})({user:{email:e.email,password:e.password}}).then((function(e){a(m(e))})).catch((function(e){a(p(e.response.data.errors))}))}}})(A),F=t(124),L=t.n(F),q=function(e){if(console.log(e),0===e.token.length)return r.a.createElement(C.a,{to:"/forum/loginPage"});return r.a.createElement("div",{className:L.a.wrapper},r.a.createElement("h3",null,e.username," "),r.a.createElement("button",{onClick:function(){return e.setTokenAC({data:{user:{token:"",username:""}},request:{status:401}})}}," \u0412\u044b\u0439\u0442\u0438 "))},z=Object(w.b)((function(e){return{username:e.mainPage.username,token:e.mainPage.token}}),{setTokenAC:m})(q),H=function(){return r.a.createElement(y.a,null,r.a.createElement(C.b,{path:"/forum/LoginPage",component:B}),r.a.createElement(C.b,{path:"/forum/Registration",component:T}),r.a.createElement(C.b,{exact:!0,path:"/forum/",component:z}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(y.a,null,r.a.createElement(w.a,{store:b},r.a.createElement(H,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},39:function(e,a,t){e.exports={wrapper:"registration_wrapper__3w-sm",form:"registration_form__1d1UH",input:"registration_input__3F6qd"}},61:function(e,a,t){e.exports={wrapper:"login_wrapper__1DHUi",form:"login_form__2l9yv",input:"login_input__2o3z6"}}},[[126,1,2]]]);
//# sourceMappingURL=main.a8189b7e.chunk.js.map